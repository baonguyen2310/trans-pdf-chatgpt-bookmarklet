javascript: !(function () {
  if (document.getElementById("txtViewerContainer")) return;
  var e = document.createElement("div");
  (e.id = "txtViewerContainer"),
    (e.style.position = "fixed"),
    (e.style.bottom = "20px"),
    (e.style.right = "20px"),
    (e.style.backgroundColor = "#fff"),
    (e.style.padding = "10px"),
    (e.style.boxShadow = "0 0 10px rgba(0, 0, 0, 0.5)"),
    (e.style.zIndex = "9999");
  var t = document.createElement("button");
  (t.textContent = "X"),
    (t.style.position = "absolute"),
    (t.style.top = "5px"),
    (t.style.right = "5px"),
    (t.style.zIndex = "10001"),
    (t.style.background = "#f00"),
    (t.style.color = "#fff"),
    (t.style.border = "none"),
    (t.style.borderRadius = "50%"),
    (t.style.width = "30px"),
    (t.style.height = "30px"),
    (t.style.textAlign = "center"),
    (t.style.lineHeight = "30px"),
    (t.style.cursor = "pointer"),
    e.appendChild(t);
  var l = document.createElement("input");
  (l.type = "file"),
    (l.accept = ".txt"),
    (l.style.display = "block"),
    (l.style.marginBottom = "10px"),
    e.appendChild(l);
  var n = document.createElement("input");
  (n.type = "file"),
    (n.accept = ".html"),
    (n.style.display = "block"),
    (n.style.marginBottom = "10px"),
    e.appendChild(n);
  var i = document.createElement("input");
  (i.type = "number"),
    (i.placeholder = "Chọn trang"),
    (i.style.display = "block"),
    (i.style.marginBottom = "10px"),
    e.appendChild(i);
  var o = document.createElement("button");
  (o.textContent = "Xem TXT"),
    (o.style.display = "block"),
    (o.style.marginBottom = "10px"),
    e.appendChild(o);
  var a = document.createElement("button");
  (a.textContent = "Xem HTML"),
    (a.style.display = "block"),
    (a.style.marginBottom = "10px"),
    e.appendChild(a);
  var s = document.createElement("button");
  (s.textContent = "Dịch"),
    (s.style.display = "block"),
    (s.style.marginBottom = "10px"),
    e.appendChild(s);
  var r = document.createElement("button");
  (r.textContent = "Next"),
    (r.style.display = "block"),
    (r.style.marginBottom = "10px"),
    e.appendChild(r);
  var d = document.createElement("div");
  (d.id = "txtPopup"),
    (d.style.position = "fixed"),
    (d.style.top = "10%"),
    (d.style.left = "10%"),
    (d.style.width = "80%"),
    (d.style.height = "80%"),
    (d.style.backgroundColor = "#fff"),
    (d.style.zIndex = "10000"),
    (d.style.boxShadow = "0 0 20px rgba(0, 0, 0, 0.7)"),
    (d.style.display = "none"),
    e.appendChild(d);
  var p = document.createElement("div");
  (p.id = "htmlPopup"),
    (p.style.position = "fixed"),
    (p.style.top = "10%"),
    (p.style.left = "10%"),
    (p.style.width = "80%"),
    (p.style.height = "80%"),
    (p.style.backgroundColor = "#fff"),
    (p.style.zIndex = "10000"),
    (p.style.boxShadow = "0 0 20px rgba(0, 0, 0, 0.7)"),
    (p.style.display = "none"),
    e.appendChild(p);
  var y = document.createElement("button");
  (y.textContent = "X"),
    (y.style.position = "absolute"),
    (y.style.top = "5px"),
    (y.style.right = "5px"),
    (y.style.zIndex = "10001"),
    d.appendChild(y);
  var c = document.createElement("button");
  (c.textContent = "X"),
    (c.style.position = "absolute"),
    (c.style.top = "5px"),
    (c.style.right = "5px"),
    (c.style.zIndex = "10001"),
    p.appendChild(c);
  var $ = document.createElement("iframe");
  ($.style.width = "100%"),
    ($.style.height = "100%"),
    ($.style.border = "none"),
    d.appendChild($);
  var h = document.createElement("img");
  (h.style.width = "100%"),
    (h.style.height = "100%"),
    (h.style.objectFit = "contain"),
    p.appendChild(h),
    document.body.appendChild(e);
  var u = document.createElement("button");
  (u.textContent = "+"),
    (u.style.position = "fixed"),
    (u.style.bottom = "20px"),
    (u.style.right = "20px"),
    (u.style.backgroundColor = "#0f0"),
    (u.style.color = "#fff"),
    (u.style.border = "none"),
    (u.style.borderRadius = "50%"),
    (u.style.width = "30px"),
    (u.style.height = "30px"),
    (u.style.textAlign = "center"),
    (u.style.lineHeight = "30px"),
    (u.style.cursor = "pointer"),
    (u.style.zIndex = "10000"),
    (u.style.display = "none"),
    document.body.appendChild(u);
  var x = "",
    g = [],
    b = [],
    f = 1;
  function m(e) {
    let t = document.querySelector('textarea[id="prompt-textarea"]'),
      l = document.querySelector('button[data-testid="send-button"]');
    if (t && l) {
      t.value = `Dịch: ${e}`;
      let n = new Event("input", { bubbles: !0 });
      t.dispatchEvent(n),
        setTimeout(() => {
          l.disabled
            ? console.log("N\xfat gửi vẫn bị v\xf4 hiệu h\xf3a!")
            : l.click();
        }, 500);
    } else console.log("Kh\xf4ng t\xecm thấy phần tử ChatGPT!");
  }
  l.addEventListener("change", function (e) {
    var t = e.target.files[0];
    if (t) {
      var l = new FileReader();
      (l.onload = function () {
        (g = (x = this.result).split(/\n\nPage \d+:\n/).slice(1)),
          (i.max = g.length),
          (i.placeholder = "Chọn trang (1-" + g.length + ")"),
          (f = 1),
          (i.value = f);
      }),
        l.readAsText(t);
    }
  }),
    n.addEventListener("change", function (e) {
      var t = e.target.files[0];
      if (t) {
        var l = new FileReader();
        (l.onload = function () {
          b = Array.from(
            new DOMParser()
              .parseFromString(this.result, "text/html")
              .querySelectorAll("img")
          ).map((e) => e.src);
        }),
          l.readAsText(t);
      }
    }),
    o.addEventListener("click", function () {
      if ((f = parseInt(i.value)) > 0 && f <= g.length) {
        var e = g[f - 1];
        ($.srcdoc =
          "<pre>" + e.replace(/</g, "&lt;").replace(/>/g, "&gt;") + "</pre>"),
          (d.style.display = "block");
      }
    }),
    a.addEventListener("click", function () {
      if ((f = parseInt(i.value)) > 0 && f <= b.length) {
        var e = b[f];
        (h.src = e), (p.style.display = "block");
      }
    }),
    s.addEventListener("click", function () {
      (f = parseInt(i.value)) > 0 && f <= g.length && m(g[f - 1]);
    }),
    r.addEventListener("click", function () {
      (f = parseInt(i.value)) < g.length && (f++, (i.value = f), m(g[f - 1]));
    }),
    t.addEventListener("click", function () {
      (e.style.display = "none"), (u.style.display = "block");
    }),
    u.addEventListener("click", function () {
      (e.style.display = "block"), (u.style.display = "none");
    }),
    y.addEventListener("click", function () {
      d.style.display = "none";
    }),
    c.addEventListener("click", function () {
      p.style.display = "none";
    }),
    document.addEventListener("keydown", function e(t) {
      "ArrowRight" === t.key && r.click();
    });
  let v = document.querySelectorAll("p").length,
    E = new MutationObserver((e) => {
      let t = document.querySelectorAll("p").length;
      t > v &&
        (function e() {
          let t = document.querySelectorAll("p");
          if (t.length < 2) return;
          let l = t[t.length - 2],
            n =
              l.parentElement.parentElement.parentElement.parentElement
                .parentElement;
          (function e(t, l) {
            let n = setInterval(() => {
              let e = t.querySelectorAll("button");
              e.length > 0 && (clearInterval(n), l());
            }, 100);
          })(n, () => {
            let e = n.querySelector("button");
            e && e.click();
          });
        })(),
        (v = t);
    });
  E.observe(document.body, { childList: !0, subtree: !0 });
})();
